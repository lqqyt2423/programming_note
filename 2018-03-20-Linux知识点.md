# Linux 知识点

## 文档/帮助相关

man 页面中标题旁代号的意思

- 1 使用者在shell环境中可以操作的命令或可运行文件
- 2 系统核心可呼叫的函数与工具等
- 3 一些常用的函数(function)与函式库(library)，大部分为C的函式库(libc)
- 4 装置文件的说明，通常在/dev下的文件
- 5 配置文件或者是某些文件的格式
- 6 游戏(games)
- 7 惯例与协议等，例如Linux文件系统、网络协议、ASCII code等等的说明
- 8 系统管理员可用的管理命令
- 9 跟kernel有关的文件

man 页面各个分级内容的意思

- NAME  简短的命令、数据名称说明
- SYNOPSIS  简短的命令下达语法(syntax)简介
- DESCRIPTION 较为完整的说明，这部分最好仔细看看！
- OPTIONS 针对 SYNOPSIS 部分中，有列举的所有可用的选项说明
- COMMANDS  当这个程序(软件)在运行的时候，可以在此程序(软件)中下达的命令
- FILES 这个程序或数据所使用或参考或连结到的某些文件
- SEE ALSO  可以参考的，跟这个命令或数据有相关的其他说明！
- EXAMPLE 一些可以参考的范例
- BUGS  是否有相关的臭虫！

放文档的地址：`/usr/share/doc`

## 检查Linux 状态时有用的命令

如果要看目前有谁在在线，可以下达『who』这个命令
如果要看网络的联机状态，可以下达 『 netstat -a 』这个命令
要看背景运行的程序可以运行『 ps -aux 』这个命令。

## Linux系统里面账号、密码、群组信息的保存位置

所有的系统上的账号与一般身份使用者，还有那个root的相关信息， 都是记录在/etc/passwd这个文件内的
个人的密码则是记录在/etc/shadow这个文件下
所有的组名都纪录在/etc/group内

## 修改文件属性与权限

- chgrp: 改变文件所属群组 --- 要被改变的组名必须要在/etc/group 文件内存在才行
- chown: 改变文件拥有者 --- 在/etc/passwd 这个文件中有纪录的用户名称才能改变
- chmod: 改变文件的权限, SUID, SGID, SBIT 等等的特性

## Filesystem Hierarchy Standard (FHS)

- /bin 系统有很多放置执行文件的目录，但/bin 比较特殊。因为/bin 放置的是在单人维护模式下还能够被操作的指令
- /boot 这个目录主要在放置开机会使用到的文件，包括 Linux 核心文件以及开机选单与开机所需配置文件等
- /dev 在 Linux 系统上，任何装置与接口设备都是以文件的型态存在于这个目录当中的
- /etc 系统主要的配置文件几乎都放置在这个目录内
- /lib 在开机时会用到的函式库， 以及在/bin 或/sbin 底下的指令 会呼叫的函式库而已
- /srv 可以视为『service』的缩写，是一些网络服务启动之后，这些服务所需要取用的数据目录
- /usr /usr 里面放置的数据属于可分享的与不可变动的，usr 是 Unix Software Resource 的缩写， 也就是『Unix 操 作系统软件资源』所放置的目录
- /var 主要针对常态性变动的文件，包括快取(cache)、登录档(log file)以及某些软件运 作所产生的文件


### usr

- /usr/bin 所有一般用户能够使用的指令都放在这里
- /usr/local 系统管理员在本机自行安装自己下载的软件(非 distribution 默认提供者)，建议安装到此目录， 这 样会比较便于管理
- /usr/share 主要放置只读架构的数据文件，当然也包括共享文件。在这个目录下放置的数据几乎是不分硬件 架构均可读取的数据， 因为几乎都是文本文件
- /usr/src 一般原始码建议放置到这里，src 有 source 的意思。至于核心原始码则建议放置到/usr/src/linux/ 目录下

### var

- /var/cache 应用程序本身运作过程中会产生的一些暂存档
- /var/lib 程序本身执行的过程中，需要使用到的数据文件放置的目录
- /var/log 重要到不行!这是登录文件放置的目录!里面比较重要的文件如/var/log/messages, /var/log/wtmp(记 录登入者的信息)等
- /var/mail 放置个人电子邮件信箱的目录
- /var/run 某些程序或者是服务启动后，会将他们的 PID 放置在这个目录下

## 文件内容查阅

- cat 由第一行开始显示文件内容
- tac 从最后一行开始显示，可以看出 tac 是 cat 的倒着写
- nl 显示的时候，顺道输出行号 --- cat -n
- more 一页一页的显示文件内容
- less 与 more 类似，但是比 more 更好的是，他可以往前翻页
- head 只看头几行
- tail 只看尾巴几行
- od 以二进制的方式读取文件内容

举例：显示10到20行的数据 `cat ./file.txt | head -n 20 | tail -n 10`

## 文件系统的运作

文件系统通常会将这两部份的数据分别存放在不同的区块，权限与属性放置到 inode 中，至于实际数据则放置到 data block 区块中。 另外，还有一个超级区块 (superblock) 会记 录整个文件系统的整体信息，包括 inode 与 block 的总量、使用量、剩余量等。

每个 inode 与 block 都有编号，至于这三个数据的意义可以简略说明如下：

- superblock 记录此 filesystem 的整体信息，包括 inode/block 的总量、使用量、剩余量， 以及文件系统的 格式与相关信息等
- inode 记录文件的属性，一个文件占用一个 inode，同时记录此文件的数据所在的 block 号码
- block 实际记录文件的内容，若文件太大时，会占用多个 block

### inode 记录的文件数据

- 该文件的存取模式(read/write/excute)
- 该文件的拥有者与群组(owner/group)
- 该文件的容量
- 该文件建立或状态改变的时间(ctime)
- 最近一次的读取时间(atime)
- 最近修改的时间(mtime)
- 定义文件特性的旗标(flag)，如 SetUID...
- 该文件真正内容的指向 (pointer)
